(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.Keet=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){var cat=function(){return[].slice.call(arguments).join("")};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=cat}exports.cat=cat}},{}],2:[function(require,module,exports){var copy=function(argv){var clone=function(v){var o={};if(typeof v!=="object"){o.copy=v;return o.copy}else{for(var attr in v){o[attr]=v[attr]}return o}};return Array.isArray(argv)?argv.map(function(v){return v}):clone(argv)};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=copy}exports.copy=copy}},{}],3:[function(require,module,exports){"use strict";var cat=require("./cat");var copy=require("./copy");module.exports=Keet;function Keet(tagName,context){var cargv=[].slice.call(arguments),ctx=this,child,childAttr,regc,injc,kStr,kRegc,kAttr,ret,l,tg,context=cargv.filter(function(c){return typeof c==="object"})[0],getId=function(id,uid){if(ctx.ctor.doc){ret=document.getElementById(id);if(!ret&&uid)ret=document.querySelector(cat('[k-link="',uid,'"]'))}else{throw"Not a document object model."}return ret},testEval=function(ev){try{return eval(ev)}catch(e){return false}},camelCase=function(s){var rx=/\-([a-z])/g;return s.replace(rx,function(a,b){return b.toUpperCase()})},guid=function(){return Math.round(Math.random()*16777216).toString(32)};this.obs={};this.ctor={};Object.defineProperty(this,"obs",{enumerable:false,configurable:false,writable:false});Object.defineProperty(this,"ctor",{enumerable:false,configurable:false,writable:false});this.ctor.doc=function(){return typeof document=="object"?true:false}();this.isNode=function(){var node=getId(ctx.el,ctx.ctor.uid);if(node&&typeof node=="object"&&node.nodeType===1){node=null;return true}};this.refNode=function(){return getId(ctx.el,ctx.ctor.uid)};this.ctor.tags={};this.ctor.ops={};this.ctor.uid=guid();tg=cargv.filter(function(c){return typeof c==="string"&&c!=="debug"})[0];if(tg)this.ctor.tmpl=["<",tg,' k-link="',this.ctor.uid,'"',">","</",tg,">"];var _processTags=function(str,kData){var childs=str.match(/{{([^{}]+)}}/g,"$1"),idx,ctmpl;if(childs){childs.forEach(function(c){regc=c.replace(/{{([^{}]+)}}/g,"$1");if(context){child=context[regc]?context[regc]:false}else{child=testEval(regc)?eval(regc):false}if(child){childAttr={el:child.el,state:child.obs._state_,preserveAttr:child.ctor.preserveAttr,uid:child.ctor.uid,operator:child.ctor.vDomLoaded};ctx.ctor.tags[regc]=childAttr;if(child.ctor.tmpl){ctmpl=copy(child.ctor.tmpl);idx=ctmpl.indexOf(">");if(~idx){ctmpl.splice(idx+1,0,child.obs._state_.value);injc=cat.apply(null,ctmpl)}}else injc=child.obs._state_?child.obs._state_.value:"";str=str.replace("{{"+regc+"}}",injc);if(child.obs._state_&&child.obs._state_["k-data"]){str=kDataProcesseor(str,child.obs._state_["k-data"])}}})}if(kData)str=kDataProcesseor(str,kData);if(ctx.ctor.d!==str){ctx.ctor.d=str;return str}else{return false}};var kDataProcesseor=function(str,kData){kStr=str.match(/{{([^{}]+)}}/g,"$1");if(kStr){kStr.forEach(function(c){kRegc=c.replace(/{{([^{}]+)}}/g,"$1");for(kAttr in kData){if(kAttr===kRegc)str=str.replace("{{"+kRegc+"}}",kData[kRegc])}})}return str};var insertAfter=function(newNode,referenceNode,parentNode){referenceNode.parentNode.insertBefore(newNode,referenceNode.nextSibling)};var loopChilds=function(arr,elem){for(var child=elem.firstChild;child!==null;child=child.nextSibling){arr.push(child);if(child.hasChildNodes()){loopChilds(arr,child)}}};var applyAttrib=function(selector,state,preserveAttr,uid){var cty,attr,ts,type,a,d,gid,prev;for(attr in state){ts=new RegExp("-");if(attr.match(ts)){type=attr.split(/-(.+)/);if(type[0]==="attr"&&!ctx.ctor.attr)ctx.ctor.attr={};if(type[0]==="css"&&!ctx.ctor.css)ctx.ctor.css={};if(type[0]==="el"&&!ctx.ctor.el)ctx.ctor.el={};if(type[0]==="attr"){ctx.ctor.attr[type[1]]={selector:selector,attr:state[attr]};gid=getId(selector,uid);if(gid)gid.setAttribute(type[1],state[attr])}else if(type[0]==="css"){cty=camelCase(attr.substring(4));if(ctx.ctor.css[cty]!==state[attr]){ctx.ctor.css[cty]={selector:selector,css:state[attr]};gid=getId(selector,uid);if(gid)gid.style[cty]=state[attr]}}else if(type[0]==="el"){ctx.ctor.el[type[1]]={selector:selector,el:state[attr]};gid=getId(selector,uid);if(gid){if(typeof gid[type[1]]==="boolean"||typeof gid[type[1]]==="string"){gid[type[1]]=state[attr]}else if(typeof gid[type[1]]==="function"&&state[attr]){gid[type[1]]()}}}}}if(preserveAttr){a=ctx.ctor.attr;for(attr in a){if(typeof a[attr]!=="function"){prev=getId(a[attr].selector,uid);if(prev){prev.setAttribute(attr,a[attr].attr)}}}d=ctx.ctor.css;for(attr in d){if(typeof d[attr]!=="function"){prev=getId(d[attr].selector,uid);if(prev)prev.style[attr]=d[attr].css}}}if(state&&state.value){var kNode=getId(selector,uid);var listKnodeChild=[];if(kNode&&kNode.hasChildNodes()){loopChilds(listKnodeChild,kNode);listKnodeChild.forEach(function(c,i){if(c.nodeType===1&&c.hasAttributes()){var kStringSingle=c.getAttribute("k-click");var KStringDouble=c.getAttribute("k-double-click");var kString=KStringDouble||kStringSingle;var isDouble=KStringDouble?true:false;if(kString){var m=kString.match(/\(([^()]+)\)/g);var kFn=kString.split("(");var kClick;if(m){if(kFn){if(context)kClick=testEval(context[kFn[0]])?eval(context[kFn[0]]):false;else kClick=testEval(kFn[0])?eval(kFn[0]):false;if(typeof kClick==="function")processClickEvt(c,kClick,kFn,isDouble)}}else{if(context)kClick=testEval(context[kFn[0]])?eval(context[kFn[0]]):false;else kClick=testEval(kFn[0])?eval(kFn[0]):false;if(typeof kClick==="function")processClickEvt(c,kClick,kFn,isDouble)}}}})}listKnodeChild=[]}};var processClickEvt=function(c,kClick,kFn,isDouble){var click=isDouble?"dblclick":"click";var rem=isDouble?"k-double-click":"k-click";c.removeAttribute(rem);c.addEventListener(click,function(evt){var argv=[];argv.push(evt);if(kFn){var v=kFn[1].slice(0,-1).split(",");if(v)v.forEach(function(v){argv.push(v)})}return kClick.apply(c,argv)})};var nodeUpdate=function(newNode,oldNode){var oAttr=newNode.attributes;var output={};for(var i=oAttr.length-1;i>=0;i--){output[oAttr[i].name]=oAttr[i].value}for(var iAttr in output){if(oldNode.attributes[iAttr]&&oldNode.attributes[iAttr].name===iAttr&&oldNode.attributes[iAttr].value!=output[iAttr]){oldNode.setAttribute(iAttr,output[iAttr])}}output={}};var nodeUpdateHTML=function(newNode,oldNode){if(newNode.nodeValue!==oldNode.nodeValue)oldNode.nodeValue=newNode.nodeValue};var updateElem=function(oldElem,newElem,fallbackHTMLstring){var oldArr=[],newArr=[];oldArr.push(oldElem);newArr.push(newElem);loopChilds(oldArr,oldElem);loopChilds(newArr,newElem);if(oldArr.length!==newArr.length){oldElem.innerHTML=fallbackHTMLstring;return false}oldArr.forEach(function(ele,idx,arr){if(ele.nodeType===1&&ele.hasAttributes()){nodeUpdate(newArr[idx],ele)}else if(ele.nodeType===3){nodeUpdateHTML(newArr[idx],ele)}if(idx===arr.length-1){oldArr.splice(0);newArr.splice(0)}})};var eventedElem=function(elem,selector,value,eventObj){var e=elem.querySelector(cat("[",selector,'="',value,'"]'));if(e){for(var attr in eventObj){if(typeof e[attr]==="function"&&eventObj[attr])e[attr]();else if(typeof e[attr]==="boolean"||typeof e[attr]==="string")e[attr]=eventObj[attr]}}};var _triggerElem=function(){var state=ctx.obs._state_,el=ctx.el,uid=ctx.ctor.uid,processStr,ele=getId(el,uid),childTags=ctx.ctor.tags,attr,tempDiv,childLen,tempDivChildLen,i,j,k,len,c;if(ele){if(state.value)processStr=_processTags(state.value,state["k-data"]);if(ctx.ctor.ops.preserve===true&&ele.hasChildNodes()){if(ctx.ctor.ops.type==="remove"){ele.removeChild(ele.childNodes[ctx.ctor.ops.index])}else if(ctx.ctor.ops.type==="evented"){eventedElem(ele.childNodes[ctx.ctor.ops.index],ctx.ctor.ops.selector,ctx.ctor.ops.value,ctx.ctor.ops.eventObj)}else if(ctx.ctor.ops.type==="update"){tempDiv=document.createElement("div");tempDiv.innerHTML=ctx.ctor.ops.node;updateElem(ele.childNodes[ctx.ctor.ops.index],tempDiv.childNodes[0])}else if(ctx.ctor.ops.type==="unshift"){tempDiv=document.createElement("div");tempDiv.innerHTML=ctx.ctor.ops.node;for(i=tempDiv.childNodes.length-1;i>-1;i--){ele.insertBefore(tempDiv.childNodes[i],ele.firstChild)}}else if(ctx.ctor.ops.type==="slice"){tempDiv=document.createElement("div");tempDiv.innerHTML=ctx.ctor.ops.node;ele.innerHTML="";tempDivChildLen=copy(tempDiv.childNodes.length);for(i=0;i<tempDivChildLen;i++){ele.appendChild(tempDiv.childNodes[0])}}else if(ctx.ctor.ops.type==="splice"){tempDiv=document.createElement("div");tempDiv.innerHTML=ctx.ctor.ops.node;childLen=copy(ele.childNodes.length);tempDivChildLen=copy(tempDiv.childNodes.length);if(ctx.ctor.ops.count&&ctx.ctor.ops.count>0){for(i=ctx.ctor.ops.index;i<childLen+1;i++){len=ctx.ctor.ops.index+ctx.ctor.ops.count;if(i<len){ele.removeChild(ele.childNodes[ctx.ctor.ops.index]);if(i===len-1&&tempDivChildLen>0){c=ctx.ctor.ops.index-1;for(j=ctx.ctor.ops.index;j<tempDivChildLen+ctx.ctor.ops.index;j++){insertAfter(tempDiv.childNodes[0],ele.childNodes[c],ele);c++}}}}}else if(ctx.ctor.ops.nodeLen){c=ctx.ctor.ops.index-1;for(k=ctx.ctor.ops.index;k<tempDivChildLen+ctx.ctor.ops.index;k++){insertAfter(tempDiv.childNodes[0],ele.childNodes[c],ele);c++}}}else{tempDiv=document.createElement("div");tempDiv.innerHTML=ctx.ctor.ops.node;ele.appendChild(tempDiv.childNodes[0])}tempDiv=null}else if(processStr&&state.value.length){if(ele.hasChildNodes()&&ele.childNodes[0].nodeType===1){tempDiv=document.createElement("div");tempDiv.innerHTML=processStr;updateElem(ele,tempDiv,processStr);tempDiv=null}else{ele.innerHTML=processStr}}else if(!processStr&&state.value===""){ele.innerHTML=""}else if(!processStr&&state.value&&state.value.length>1){tempDiv=document.createElement("div");tempDiv.innerHTML=ctx.ctor.d;updateElem(ele,tempDiv,ctx.ctor.d)}else if(!processStr&&!state.value){}applyAttrib(el,state,uid);for(attr in childTags)applyAttrib(childTags[attr].el,childTags[attr].state,childTags[attr].preserveAttr,childTags[attr].uid);ele=null}};var _registerElem=function(){var regList=ctx.ctor.register,evReg;var reg=regList.filter(function(f){return typeof f==="string"})[0];var force=regList.filter(function(f){return typeof f==="boolean"})[0];var fn=regList.filter(function(f){return typeof f==="function"})[0];if(context){evReg=context[reg]?context[reg]:false}else{evReg=testEval(reg)?eval(reg):false}if(evReg&&typeof evReg.__proto__.compose==="function"){evReg.compose(force,fn)}};Object.defineProperty(this.obs,"_state_",{__proto__:null,writeable:true,get:function(){return this._},set:function(value){this._=value;if(ctx.el||ctx.ctor.uid)_triggerElem();if(ctx.ctor.register)_registerElem()}});if(!Object.prototype.watch){Object.defineProperty(Object.prototype,"watch",{enumerable:false,configurable:true,writable:false,value:function(prop,handler){var oldval=this[prop],newval=oldval,getter=function(){return newval},setter=function(val){oldval=newval;return newval=handler.call(this,prop,oldval,val)};if(delete this[prop]){Object.defineProperty(this,prop,{get:getter,set:setter,enumerable:true,configurable:true})}}})}if(!Object.prototype.unwatch){Object.defineProperty(Object.prototype,"unwatch",{enumerable:false,configurable:true,writable:false,value:function(prop){var val=this[prop];delete this[prop];this[prop]=val}})}if(!Array.prototype.assign){Object.defineProperty(Array.prototype,"assign",{enumerable:false,writable:true,value:function(index,value){this[index]=value}})}}Keet.prototype.register=function(instance,force,fn){var argv=[].slice.call(arguments);if(typeof instance==="string")this.ctor.register=argv;else throw"Argument is not a string.";return this};Keet.prototype.unreg=function(){this.ctor.register=null;return this};Keet.prototype.template=function(tag,id){var vtag=["<",tag,">","</",tag,">"];if(id){vtag.splice(2,0,' id="',id,'"');this.link(id)}this.ctor.tmpl=vtag;return this};Keet.prototype.compose=function(force,fn){var argv=[].slice.call(arguments),c=this.obs._state_,ctx=this,elem;force=argv.filter(function(f){return typeof f==="boolean"})[0];fn=argv.filter(function(f){return typeof f==="function"})[0];function childFn(){for(var attr in ctx.ctor.tags){if(typeof ctx.ctor.tags[attr].operator==="function")ctx.ctor.tags[attr].operator()}}elem=this.isNode();if(elem){this.obs._state_=c;if(fn)fn(this.refNode());childFn()}else{throw"element does not exist"}return this};Keet.prototype.preserveAttributes=function(argv){this.ctor.preserveAttr=argv?false:true;return this};Keet.prototype.vDomLoaded=function(cb){if(typeof cb==="function"){this.ctor.vDomLoaded=cb}return this};Keet.prototype.link=function(id,value){var argv=[].slice.call(arguments),kLink;if(argv.length===1)this.el=argv[0];else if(argv.length===2&&!this.ctor.tmpl){this.el=argv[0];this.set(argv[1])}else if(argv.length===2&&this.ctor.tmpl){kLink=this.ctor.tmpl.indexOf(' k-link="');if(~kLink){this.ctor.tmpl.splice(kLink,2,' id="',argv[0])}this.el=argv[0];this.set(argv[1])}else{throw"component already declared"}return this};Keet.prototype.watch=function(instance,fn){var ctx=this,argv,event,pristineLen=copy(this.ctor.arrayProto),opsList,op,query,instance=instance||this.ctor.arrayProto;if(!Array.isArray(instance)){argv=[].slice.call(arguments);this.watchObj.apply(this,argv);return this}opsList=function(){return["push","pop","shift","unshift","slice","splice","assign"]};op=opsList();var change=function(){if(typeof fn==="function")fn(ctx.refNode())};query=function(ops,argvs){op=[];if(ops==="push")ctx.insert(argvs[0]);else if(ops==="pop")ctx.remove(instance.length);else if(ops==="shift")ctx.remove(0);else if(ops==="unshift")ctx.unshift.apply(ctx,argvs);else if(ops==="slice")ctx.slice.apply(ctx,argvs);else if(ops==="splice")ctx.splice.apply(ctx,argvs);else ctx.update.apply(ctx,argvs);op=opsList();change()};op.forEach(function(f,i,r){instance[f]=function(){if(op.length>0){var fargv=[].slice.call(arguments);Array.prototype[f].apply(this,fargv);if(fargv.length===1&&f==="splice")fargv.push(pristineLen.length-fargv[0]);query(f,fargv)}}});return this};Keet.prototype.watchObj=function(instance,set,prop){var ctx=this,attr;if(Array.isArray(instance)){throw"Wrong type of operation, use Keet.prototype.watch instead."}for(attr in instance){instance.watch(attr,function(idx,o,n){instance.unwatch(attr);if(typeof set==="function"){instance[attr]=n;set.apply(ctx,arguments);ctx.watchObj(instance,set)}else if(typeof set==="string"&&prop&&typeof prop==="string"){instance[attr]=n;ctx.set(set,instance[prop]);ctx.watchObj(instance,set,prop)}else{throw"Not a function."}})}return this};Keet.prototype.watchDistict=function(instance,value){var ctx=this,cp,attr,obj;if(typeof instance==="object"){if(!this.obs._state_){cp=copy(instance);if(value)cp["value"]=value;this.set(cp)}for(attr in instance){instance.watch(attr,function(idx,o,n){instance.unwatch(attr);obj={};obj[idx]=n;ctx.set(obj);ctx.watchDistict(instance)})}}return this};Keet.prototype.unWatch=function(instance){var attr,instance=instance||this.ctor.arrayProto;if(Array.isArray(instance)){delete instance.push;delete instance.pop;delete instance.shift;delete instance.unshift;delete instance.slice;delete instance.splice;delete instance.assign}else{for(attr in instance){instance.unwatch(attr)}}return this};Keet.prototype.array=function(array,templateString,isAppend){var tmplStr="",arrProps,tmpl,rep;this.ctor.arrayProto=array;this.ctor.arrayPristine=copy(array);this.ctor.tmplString=templateString;arrProps=templateString.match(/{{([^{}]+)}}/g,"$1");array.forEach(function(r){tmpl=templateString;arrProps.forEach(function(s){rep=s.replace(/{{([^{}]+)}}/g,"$1");tmpl=tmpl.replace(/{{([^{}]+)}}/,r[rep])});tmplStr+=tmpl});if(isAppend){this.ctor.ops.node=tmplStr}else{this.set(tmplStr)}return this};Keet.prototype.evented=function(index,selector,value,eventObj){var arr=this.ctor.arrayProto,str=this.ctor.tmplString,fnArr;if(Array.isArray(arr)){if(typeof index==="number")this.ctor.ops={preserve:true,type:"evented",index:index,selector:selector,value:value,eventObj:eventObj};this.array(arr,str)}else{throw"object reference not created from array."}return this};Keet.prototype.update=function(index,obj,fn){var arr=this.ctor.arrayProto,str=this.ctor.tmplString,fnArr;if(Array.isArray(arr)){if(typeof index==="number")arr[index]=obj;this.ctor.ops={preserve:true,type:"update",index:index,node:""};if(typeof fn==="function"){fnArr=fn(arr);if(fnArr&&Array.isArray(fnArr)){this.ctor.ops.preserve=false;arr=fnArr}}else{this.array([obj],str,true)}this.array(arr,str)}else{throw"object reference not created from array."}return this};Keet.prototype.remove=function(idx,fn){var arr=this.ctor.arrayProto,arrPris=copy(this.ctor.arrayPristine),str=this.ctor.tmplString,index,key,fnArr;if(Array.isArray(arr)){this.ctor.ops={preserve:true,type:"remove"};if(typeof idx==="object"){key=Object.keys(idx)[0];index=arrPris.map(function(f){return f[key]}).indexOf(idx[key]);if(~index){arrPris.splice(index,1);this.ctor.ops.index=index}}else{index=arrPris[idx];if(index){arrPris.splice(idx,1);this.ctor.ops.index=idx}}arr=copy(arrPris);if(typeof fn==="function"){fnArr=fn(arr);if(fnArr&&Array.isArray(fnArr)){this.ctor.ops.preserve=false;arr=fnArr}}this.array(arr,str)}else{throw"object reference not created from array."}return this};Keet.prototype.insert=function(obj,fn){var arr=this.ctor.arrayProto,str=this.ctor.tmplString,fnArr;if(Array.isArray(arr)){arr.push(obj);this.ctor.ops={preserve:true,type:"append",index:null,node:""};if(typeof fn==="function"){fnArr=fn(arr);if(fnArr&&Array.isArray(fnArr)){this.ctor.ops.preserve=false;arr=fnArr}}else{this.array([obj],str,true)}this.array(arr,str)}else{throw"object reference not created from array."}return this};Keet.prototype.unshift=function(fn,obj){var arr=copy(this.ctor.arrayPristine),str=this.ctor.tmplString,ctxFn,argv,fnArr;if(typeof arguments[0]==="function"){ctxFn=[].shift.call(arguments)}if(Array.isArray(arr)){argv=[].slice.call(arguments);arr.unshift(argv);arr=[].concat.apply([],arr);this.ctor.ops={preserve:true,type:"unshift",index:null,node:""};if(ctxFn&&typeof ctxFn==="function"){fnArr=ctxFn(arr);if(fnArr&&Array.isArray(fnArr)){this.ctor.ops.preserve=false;arr=fnArr}}else{this.array(argv,str,true)}this.array(arr,str)}else{throw"object reference not created from array."}return this};Keet.prototype.slice=function(fn,start,end){var arr=copy(this.ctor.arrayPristine),str=this.ctor.tmplString,ctxFn,argv,fnArr;if(typeof arguments[0]==="function"){ctxFn=[].shift.call(arguments)}if(Array.isArray(arr)){argv=[].slice.call(arguments);if(argv.length==2)arr=arr.slice(argv[0],argv[1]);else arr=arr.slice(argv[0]);this.ctor.ops={preserve:true,type:"slice",index:null,node:""};if(ctxFn&&typeof ctxFn==="function"){fnArr=ctxFn(arr);if(fnArr&&Array.isArray(fnArr)){this.ctor.ops.preserve=false;arr=fnArr}}else{this.array(arr,str,true)}this.array(arr,str)}else{throw"object reference not created from array."}return this};Keet.prototype.splice=function(fn,start,count,obj){var arr=copy(this.ctor.arrayPristine),str=this.ctor.tmplString,ctxFn,objs,argv,fnArr;argv=[].slice.call(arguments);if(typeof arguments[0]==="function"){ctxFn=[].shift.call(argv)}start=[].shift.call(argv);if(typeof argv[0]==="number"){count=[].shift.call(argv)}if(Array.isArray(arr)){if(argv.length>0&&count){arr.splice(start,count,argv);arr=[].concat.apply([],arr)}else if(argv.length===0&&count){arr.splice(start,count);arr=[].concat.apply([],arr)}else if(argv.length>0&&!count){arr.splice(start,0,argv);arr=[].concat.apply([],arr)}this.ctor.ops={preserve:true,type:"splice",index:start,count:count,node:argv,nodeLen:argv.length,pristinelen:this.ctor.arrayPristine.length};if(ctxFn&&typeof ctxFn==="function"){fnArr=ctxFn(arr);if(fnArr&&Array.isArray(fnArr)){this.ctor.ops.preserve=false;arr=fnArr}}else{if(argv.length>0)this.array(argv,str,true)}this.array(arr,str)}else{throw"object reference not created from array."}return this};Keet.prototype.bindListener=function(inputId,listener,type){var ctx=this;var e=document.getElementById(inputId);type=type||"input";if(!ctx.ctor.ev)ctx.ctor.ev={};if(e){var str=cat(inputId,"-",type);ctx.ctor.ev[str]=function(evt){if(typeof listener.__proto__.set==="function"){evt.preventDefault();listener.set(e.value)}else if(typeof listener==="function"){listener(e.value,evt)}};e.addEventListener(type,ctx.ctor.ev[str])}else throw"Element does not exist";return this};Keet.prototype.removeListener=function(inputId,type){var ctx=this;var e=document.getElementById(inputId);type=type||"input";if(e){var str=cat(inputId,"-",type);e.removeEventListener(type,ctx.ctor.ev[str],false);delete ctx.ctor.ev[str]}else throw"Element does not exist";return this};Keet.prototype.set=function(value,vProp){var obj,assign;if(vProp){obj={};obj[value]=vProp;if(!this.obs._state_){this.obs._state_=obj}else{assign=Object.assign(this.obs._state_,obj);this.obs._state_=assign}}else{if(!this.obs._state_&&typeof value!=="object"){obj={};obj.value=value;this.obs._state_=obj}else if(!this.obs._state_&&typeof value==="object"){this.obs._state_=value}else if(typeof value==="object"){assign=Object.assign(this.obs._state_,value);this.obs._state_=assign}else{this.obs._state_={value:value}}}return this}},{"./cat":1,"./copy":2}]},{},[3])(3)});
